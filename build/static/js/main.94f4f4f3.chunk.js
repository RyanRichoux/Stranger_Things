(this.webpackJsonpStranger_Things=this.webpackJsonpStranger_Things||[]).push([[0],{33:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return C}));var n=s(0),r=s(4),c=s(1),a=s(13),o=s.n(a),i=s(9),l=s(3),j=function(){return Object(n.jsx)("div",{className:"app_header",children:Object(n.jsx)("img",{className:"app_headerImage",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQlejjMSQWY4W5mPFpwAYB6ypUdclv0kALvDg&usqp=CAUhttps://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQlejjMSQWY4W5mPFpwAYB6ypUdclv0kALvDg&usqp=CAUU",width:"100px"})})},u=s(2),h=function(e){var t=Object(c.useState)(""),s=Object(r.a)(t,2),a=s[0],o=s[1],i=e.setAuthorized,l=e.setCurrentUser,j=e.currentUser;return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://strangers-things.herokuapp.com/api/2010-LSU-WEB-PT/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:a})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.success?(alert("Logged in."),i(e.data.token)):alert("Failed to login.")})).catch(console.error)},children:[Object(n.jsx)("h1",{children:" Login:"}),Object(n.jsx)("label",{children:"Username:"}),Object(n.jsx)("input",{name:"Username",required:!0,onChange:function(e){return o(Object(u.a)(Object(u.a)({},a),{},{username:e.target.value}))}}),Object(n.jsx)("label",{children:"Password:"}),Object(n.jsx)("input",{type:"password",required:!0,onChange:function(e){return function(e){o(Object(u.a)(Object(u.a)({},a),{},{password:e.target.value})),l(a.username),console.log(j)}(e)}}),Object(n.jsx)("button",{type:"submit",children:"submit"})]})},d=function(e){var t=e.setAuthorized,s=e.setCurrentUser,r=e.authorized;return Object(n.jsx)("div",{children:r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Click the button below to log out"}),Object(n.jsx)("button",{onClick:function(e){e.preventDefault(),t(!1),s(""),l.b,l.a},children:"Log out"})," "]}):null})},b=s(21),p=function(e,t,s){console.log(e,t,s),fetch("https://strangers-things.herokuapp.com/api/2010-LSU-WEB-PT/posts/".concat(e,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({message:s})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch(console.error)},O=function(e){var t=e._id,s=e.authorized,a=Object(c.useState)(""),o=Object(r.a)(a,2),i=o[0],l=o[1];return Object(n.jsx)(b.a,{trigger:Object(n.jsx)("button",{className:"postEdit",children:" Message "}),modal:!0,nested:!0,children:function(e){return Object(n.jsxs)("div",{className:"modal",children:[Object(n.jsx)("button",{className:"close",onClick:e,children:"\xd7"}),Object(n.jsx)("div",{className:"header",children:" Send Message "}),Object(n.jsxs)("div",{className:"content",children:[" ",Object(n.jsx)("label",{children:"Message:"}),Object(n.jsx)("input",{name:"Username",required:!0,onChange:function(e){return l(Object(u.a)(Object(u.a)({},i),{},{content:e.target.value}))}})]}),Object(n.jsx)("div",{className:"actions",children:Object(n.jsx)("button",{className:"button",onClick:function(){console.log(i),p(t,s,i),console.log("modal closed "),e()},children:"Send"})})]})}})},x=function(e){var t=e.authorized,s=Object(c.useState)(""),a=Object(r.a)(s,2),o=a[0],i=a[1];return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://strangers-things.herokuapp.com/api/2010-LSU-WEB-PT/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({post:o})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch(console.error)},children:[Object(n.jsx)("h1",{children:" Create New Post:"}),Object(n.jsx)("h3",{children:"Title:"}),Object(n.jsx)("input",{type:"text",required:!0,placeholder:"text",onChange:function(e){return i(Object(u.a)(Object(u.a)({},o),{},{title:e.target.value}))}}),Object(n.jsx)("h3",{children:"Description:"}),Object(n.jsx)("input",{type:"text",required:!0,placeholder:"text",onChange:function(e){return i(Object(u.a)(Object(u.a)({},o),{},{description:e.target.value}))}}),Object(n.jsx)("h3",{children:"Price:"}),Object(n.jsx)("input",{type:"text",required:!0,placeholder:"text",onChange:function(e){return i(Object(u.a)(Object(u.a)({},o),{},{price:e.target.value}))}}),Object(n.jsx)("h3",{children:"Delivery:"}),Object(n.jsx)("input",{type:"radio",required:!0,id:"willDeliveryes",name:"willDeliver",value:"true",onChange:function(e){return i(Object(u.a)(Object(u.a)({},o),{},{willDeliver:e.target.value}))}}),Object(n.jsx)("label",{for:"willDeliveryes",children:"Yes"}),Object(n.jsx)("input",{type:"radio",required:!0,id:"willDeliverno",name:"willDeliver",value:"false",onChange:function(e){return i(Object(u.a)(Object(u.a)({},o),{},{willDeliver:e.target.value}))}}),Object(n.jsx)("label",{for:"willDeliverno",children:"No"}),Object(n.jsx)("button",{type:"submit",children:"submit"})]})},m=function(e){var t=e.authorized,s=Object(c.useState)(!1),a=Object(r.a)(s,2),o=a[0],i=a[1];return t&&o?o.map((function(e){var s=e._id,r=e.post,c=e.fromUser,a=e.content;return Object(n.jsx)("div",{className:"mainContainer",children:Object(n.jsxs)("div",{className:"postBox",children:[Object(n.jsx)("span",{className:"postTitle",children:r.title}),Object(n.jsxs)("span",{className:"postAuthor",children:["from ",c.username]}),Object(n.jsx)("span",{className:"postDescription",children:a}),Object(n.jsx)(O,{_id:s,authorized:t})]})})})):(fetch("https://strangers-things.herokuapp.com/api/2010-LSU-WEB-PT/users/me",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){console.log(e),i(e.data.messages)})).catch(console.error),Object(n.jsx)(n.Fragment,{}))},g=function(e){var t=Object(c.useState)(""),s=Object(r.a)(t,2),a=s[0],o=s[1],i=e.setAuthorized;return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://strangers-things.herokuapp.com/api/2010-LSU-WEB-PT/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:a})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.success?(alert("Registered."),i(e.data.token)):alert("Username Already Taken.")})).catch(console.error)},children:[Object(n.jsx)("h1",{children:" Registration:"}),Object(n.jsx)("label",{children:"Username:"}),Object(n.jsx)("input",{name:"Username",required:!0,onChange:function(e){return o(Object(u.a)(Object(u.a)({},a),{},{username:e.target.value}))}}),Object(n.jsx)("label",{children:"Password:"}),Object(n.jsx)("input",{type:"password",required:!0,onChange:function(e){return o(Object(u.a)(Object(u.a)({},a),{},{password:e.target.value}))}}),Object(n.jsx)("button",{type:"submit",children:"submit"})]})},f=s(11),v=s.n(f),N=s(14),y=function(e){var t=e.allPosts,s=e.setAllPosts,r=e.authorized,c=e.searchValue,a=e.currentUser,o=function(){var e=Object(N.a)(v.a.mark((function e(t){var s,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deletePost: ",t),e.next=3,fetch("https://strangers-things.herokuapp.com/api/2010-LSU-WEB-PT/posts/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 3:return s=e.sent,e.next=6,s.json();case 6:n=e.sent,console.log("data ",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?t.map((function(e){var t=e._id,s=e.title,c=e.description,i=e.location,l=e.author,j=e.price,u=e.createdAt,h=e.updatedAt,d=e.willDeliver;return Object(n.jsxs)("div",{className:"postBox",children:[Object(n.jsxs)("span",{className:"postTitle",children:["Title: ",s," Price: ",j]}),Object(n.jsx)("span",{className:"postDescription"}),Object(n.jsxs)("h4",{children:["Description: ",c]}),Object(n.jsxs)("span",{className:"postLocation",children:["Location: ",i," "]}),Object(n.jsxs)("span",{className:"postLocation",children:["Delivery: ",d?"Yes":"No"," "]}),Object(n.jsxs)("span",{className:"postAuthor",children:["Created By: ",l.username]}),Object(n.jsxs)("span",{className:"postCreatedUpdated",children:[u,", ",h]}),Object(n.jsx)("hr",{}),Object(n.jsx)("hr",{}),r?a===l.username?Object(n.jsx)("button",{type:"button",className:"postDelete",onClick:function(){return o(t)},children:"Delete"}):Object(n.jsx)(O,{_id:t,authorized:r}):"You are currently not logged in and cannot send messages or create posts."]},t)})):(fetch("https://strangers-things.herokuapp.com/api/2010-LSU-WEB-PT/posts").then((function(e){return e.json()})).then((function(e){console.log(c),console.log(e),s(e.data.posts)})).catch(console.error),Object(n.jsx)(n.Fragment,{}))},S=function(e){var t=e.searchValue,s=e.authorized,a=e.setAllPosts,o=e.allPosts,i=e.currentUser,l=Object(c.useState)([]),j=Object(r.a)(l,2),u=j[0],h=j[1];var d=function(){var e=Object(N.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deletePost: ",t),alert("Post is deleted!"),e.next=4,fetch("https://strangers-things.herokuapp.com/api/2010-LSU-WEB-PT/posts/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 4:return n=e.sent,e.next=7,n.json();case 7:e.sent&&fetch("https://strangers-things.herokuapp.com/api/2010-LSU-WEB-PT/posts").then((function(e){return e.json()})).then((function(e){a(e.data.posts)})).catch(console.error);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){h(o.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())})))}),[t]),u.map((function(e){var t=e._id,r=e.title,c=e.description,a=e.location,o=e.author,l=e.price,j=e.createdAt,u=e.updatedAt;return Object(n.jsxs)("div",{className:"postBox",children:[Object(n.jsxs)("span",{className:"postTitle",children:["Title: ",r," Price: ",l]}),Object(n.jsx)("span",{className:"postDescription"}),Object(n.jsxs)("h4",{children:["Description: ",c]}),Object(n.jsxs)("span",{className:"postLocation",children:["Location: ",a," "]}),Object(n.jsxs)("span",{className:"postAuthor",children:["Created By: ",o.username]}),Object(n.jsxs)("span",{className:"postCreatedUpdated",children:[j,", ",u,", [isAuthor]"]}),s?i===o.username?Object(n.jsx)("button",{type:"button",className:"postDelete",onClick:function(){return d(t)},children:"Delete"}):Object(n.jsx)(O,{_id:t,authorized:s}):"You are currently not logged in and cannot send messages or create posts."]},t)}))},P=function(e){var t=e.authorized,s=e.currentUser,a=Object(c.useState)(!1),o=Object(r.a)(a,2),i=o[0],l=o[1];return t&&i?i.map((function(e){var r=e._id,c=e.title,a=e.description,o=e.location,i=e.author,l=e.price,j=e.createdAt,u=e.updatedAt,h=e.willDeliver;return Object(n.jsx)("div",{className:"mainContainer",children:Object(n.jsxs)("div",{className:"postBox",children:[Object(n.jsxs)("span",{className:"postTitle",children:["Title: ",c," Price: ",l]}),Object(n.jsx)("span",{className:"postDescription"}),Object(n.jsxs)("h4",{children:["Description: ",a]}),Object(n.jsxs)("span",{className:"postLocation",children:["Location: ",o," "]}),Object(n.jsxs)("span",{className:"postLocation",children:["Delivery: ",h?"Yes":"No"," "]}),Object(n.jsxs)("span",{className:"postAuthor",children:["Created By: ",i.username]}),Object(n.jsxs)("span",{className:"postCreatedUpdated",children:[j,", ",u]}),Object(n.jsx)("hr",{}),Object(n.jsx)("hr",{}),t?s===i.username?Object(n.jsx)("button",{type:"button",className:"postDelete",onClick:function(){return handleDelete(r)},children:"Delete"}):Object(n.jsx)(O,{_id:r,authorized:t}):"You are currently not logged in and cannot send messages or create posts."]},r)})})):(fetch("https://strangers-things.herokuapp.com/api/2010-LSU-WEB-PT/users/me",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){l(e.data.posts)})).catch(console.error),Object(n.jsx)(n.Fragment,{}))};function C(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),s=t[0],a=t[1],o=Object(c.useState)(!1),u=Object(r.a)(o,2),b=u[0],p=u[1],f=Object(c.useState)(""),v=Object(r.a)(f,2),N=v[0],C=v[1],U=Object(c.useState)(""),A=Object(r.a)(U,2),D=A[0],T=A[1];return Object(n.jsxs)(i.a,{children:[Object(n.jsx)(j,{}),Object(n.jsxs)("form",{children:[Object(n.jsx)("input",{type:"text",className:"search",placeholder:"Search...",onChange:function(e){return T(e.target.value)}}),Object(n.jsx)(i.b,{to:"/Search",children:"Search"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("nav",{children:Object(n.jsxs)("ul",{children:[b?Object(n.jsx)("li",{children:Object(n.jsx)(i.b,{to:"/Post",children:"Post"})}):null,b?Object(n.jsx)("li",{children:Object(n.jsx)(i.b,{to:"/Profile",children:"Messages"})}):null,b?Object(n.jsx)("li",{children:Object(n.jsx)(i.b,{to:"/YourPosts",children:"Your Posts"})}):null,Object(n.jsx)("li",{children:Object(n.jsx)(i.b,{to:"/ShowPosts",children:"See Posts"})}),b?null:Object(n.jsx)("li",{children:Object(n.jsx)(i.b,{to:"/Register",children:"Register"})}),b?null:Object(n.jsx)("li",{children:Object(n.jsx)(i.b,{to:"/Login",children:"Login"})}),b?Object(n.jsx)("li",{children:Object(n.jsx)(i.b,{to:"/LogOut",children:"LogOut"})}):null]})}),Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.b,{path:"/Post",children:Object(n.jsx)(x,{authorized:b})}),Object(n.jsx)(l.b,{path:"/Profile",children:Object(n.jsx)(m,{authorized:b,currentUser:N})}),Object(n.jsx)(l.b,{path:"/YourPosts",children:Object(n.jsx)(P,{authorized:b,currentUser:N})}),Object(n.jsx)(l.b,{path:"/ShowPosts",children:Object(n.jsx)("div",{className:"mainContainer",children:Object(n.jsx)(y,{authorized:b,currentUser:N,setAllPosts:a,allPosts:s,searchValue:D})})}),Object(n.jsx)(l.b,{path:"/Register",children:b?null:Object(n.jsx)(g,{setAuthorized:p})}),Object(n.jsx)(l.b,{path:"/Login",children:b?null:Object(n.jsx)(h,{currentUser:N,setCurrentUser:C,setAuthorized:p,authorized:b})}),Object(n.jsx)(l.b,{path:"/Search",children:Object(n.jsx)(S,{allPosts:s,currentUser:N,authorized:b,searchValue:D,setSearchValue:T,setAllPosts:a})}),Object(n.jsx)(l.b,{path:"/LogOut",children:Object(n.jsx)(d,{setCurrentUser:C,setAuthorized:p,authorized:b})}),Object(n.jsx)(l.b,{path:"/Messages",children:Object(n.jsx)(O,{})})]})]})]})}o.a.render(Object(n.jsx)(C,{}),document.getElementById("app"))}},[[33,1,2]]]);
//# sourceMappingURL=main.94f4f4f3.chunk.js.map